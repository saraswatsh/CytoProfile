<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run Random Forest Classification on Cytokine Data, — cyt_rf • CytoProfile</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run Random Forest Classification on Cytokine Data, — cyt_rf"><meta name="description" content="This function trains and evaluates a Random Forest classification model on
cytokine data. It includes feature importance visualization, cross-
validation for feature selection, and performance metrics such as accuracy,
sensitivity, and specificity. Optionally, for binary classification, the
function also plots the ROC curve and computes the AUC."><meta property="og:description" content="This function trains and evaluates a Random Forest classification model on
cytokine data. It includes feature importance visualization, cross-
validation for feature selection, and performance metrics such as accuracy,
sensitivity, and specificity. Optionally, for binary classification, the
function also plots the ROC curve and computes the AUC."><meta property="og:image" content="https://saraswatsh.github.io/CytoProfile/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CytoProfile</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/saraswatsh/CytoProfile/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Run Random Forest Classification on Cytokine Data,</h1>
      <small class="dont-index">Source: <a href="https://github.com/saraswatsh/CytoProfile/blob/main/R/cyt_rf.R" class="external-link"><code>R/cyt_rf.R</code></a></small>
      <div class="d-none name"><code>cyt_rf.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function trains and evaluates a Random Forest classification model on
cytokine data. It includes feature importance visualization, cross-
validation for feature selection, and performance metrics such as accuracy,
sensitivity, and specificity. Optionally, for binary classification, the
function also plots the ROC curve and computes the AUC.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cyt_rf</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">group_col</span>,</span>
<span>  ntree <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  mtry <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  train_fraction <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  plot_roc <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  k_folds <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  step <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  run_rfcv <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame containing the cytokine data, with one column as
the grouping variable and the rest as numerical features.</p></dd>


<dt id="arg-group-col">group_col<a class="anchor" aria-label="anchor" href="#arg-group-col"></a></dt>
<dd><p>A string representing the name of the column with the
grouping variable (the target variable for classification).</p></dd>


<dt id="arg-ntree">ntree<a class="anchor" aria-label="anchor" href="#arg-ntree"></a></dt>
<dd><p>An integer specifying the number of trees to grow in the forest
(default is 500).</p></dd>


<dt id="arg-mtry">mtry<a class="anchor" aria-label="anchor" href="#arg-mtry"></a></dt>
<dd><p>An integer specifying the number of variables randomly selected
at each split (default is 5).</p></dd>


<dt id="arg-train-fraction">train_fraction<a class="anchor" aria-label="anchor" href="#arg-train-fraction"></a></dt>
<dd><p>A numeric value between 0 and 1 representing the
proportion of data to use for training (default is 0.7).</p></dd>


<dt id="arg-plot-roc">plot_roc<a class="anchor" aria-label="anchor" href="#arg-plot-roc"></a></dt>
<dd><p>A logical value indicating whether to plot the ROC curve and
compute the AUC for binary classification (default is FALSE).</p></dd>


<dt id="arg-k-folds">k_folds<a class="anchor" aria-label="anchor" href="#arg-k-folds"></a></dt>
<dd><p>An integer specifying the number of folds for
cross-validation (default is 5).</p></dd>


<dt id="arg-step">step<a class="anchor" aria-label="anchor" href="#arg-step"></a></dt>
<dd><p>A numeric value specifying the fraction of variables to remove
at each step during cross-validation for feature selection (default is
0.5).</p></dd>


<dt id="arg-run-rfcv">run_rfcv<a class="anchor" aria-label="anchor" href="#arg-run-rfcv"></a></dt>
<dd><p>A logical value indicating whether to run Random Forest
cross-validation for feature selection (default is TRUE).</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A logical value indicating whether to print additional
informational output to the console. When <code>TRUE</code>, the function will
display progress messages, intermediate results, and plots; when
<code>FALSE</code> (the default), it runs quietly.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>An integer specifying the seed for reproducibility (default is 123).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing:</p>
<dl><dt>model</dt>
<dd><p>The trained Random Forest model.</p></dd>

<dt>confusion_matrix</dt>
<dd><p>The confusion matrix of the test set predictions.</p></dd>

<dt>importance_plot</dt>
<dd><p>A ggplot object showing the variable importance
plot based on Mean Decrease Gini.</p></dd>

<dt>rfcv_result</dt>
<dd><p>Results from Random Forest cross-validation for feature
selection (if <code>run_rfcv</code> is TRUE).</p></dd>

<dt>importance_data</dt>
<dd><p>A data frame containing the variable importance
based on the Gini index.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function fits a Random Forest model to the provided data by splitting it
into training and test sets. It calculates performance metrics such as
accuracy, sensitivity, and specificity for both sets. For binary
classification, it can also plot the ROC curve and compute the AUC. If
<code>run_rfcv</code> is TRUE, cross-validation is performed to select the optimal
number of features.
If <code>verbose</code> is TRUE, the function prints additional information to the
console, including training results, test results, and plots.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data.df0</span> <span class="op">&lt;-</span> <span class="va">ExampleData1</span></span></span>
<span class="r-in"><span><span class="va">data.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">data.df0</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log2</a></span><span class="op">(</span><span class="va">data.df0</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data.df</span> <span class="op">&lt;-</span> <span class="va">data.df</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">data.df</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">data.df</span>, <span class="va">Group</span> <span class="op">!=</span> <span class="st">"ND"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Storing results in an object</span></span></span>
<span class="r-in"><span><span class="va">rf_results</span> <span class="op">&lt;-</span> <span class="fu">cyt_rf</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data.df</span>, group_col <span class="op">=</span> <span class="st">"Group"</span>, k_folds <span class="op">=</span> <span class="fl">5</span>, ntree <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>  mtry <span class="op">=</span> <span class="fl">4</span>, run_rfcv <span class="op">=</span> <span class="cn">TRUE</span>, plot_roc <span class="op">=</span> <span class="cn">TRUE</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Extracting Results and plots</span></span></span>
<span class="r-in"><span><span class="va">rf_results</span><span class="op">$</span><span class="va">model</span> <span class="co"># Extracts the training model</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Call:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  randomForest(formula = formula_rf, data = train_data, ntree = ntree,      mtry = mtry, importance = TRUE, do.trace = FALSE) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Type of random forest: classification</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      Number of trees: 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No. of variables tried at each split: 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         OOB estimate of  error rate: 11.43%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Confusion matrix:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        PreT2D T2D class.error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PreT2D     62   8   0.1142857</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> T2D         8  62   0.1142857</span>
<span class="r-in"><span><span class="va">rf_results</span><span class="op">$</span><span class="va">confusion_matrix</span> <span class="co"># Extracts the confusion matrix from testing set</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Confusion Matrix and Statistics</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Reference</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prediction PreT2D T2D</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     PreT2D     25   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     T2D         4  22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Accuracy : 0.8103          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  95% CI : (0.6859, 0.9013)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     No Information Rate : 0.5             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     P-Value [Acc &gt; NIR] : 1.016e-06       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   Kappa : 0.6207          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Mcnemar's Test P-Value : 0.5465          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Sensitivity : 0.8621          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Specificity : 0.7586          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Pos Pred Value : 0.7812          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Neg Pred Value : 0.8462          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Prevalence : 0.5000          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Detection Rate : 0.4310          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Detection Prevalence : 0.5517          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Balanced Accuracy : 0.8103          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        'Positive' Class : PreT2D          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           </span>
<span class="r-in"><span><span class="va">rf_results</span><span class="op">$</span><span class="va">importance_plot</span> <span class="co"># Extracts the variable importance plot</span></span></span>
<span class="r-plt img"><img src="cyt_rf-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">rf_results</span><span class="op">$</span><span class="va">rfcv_plot</span><span class="co"># Extracts the cross-validation plot.</span></span></span>
<span class="r-plt img"><img src="cyt_rf-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shubh Saraswat, Xiaohua Douglas Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

